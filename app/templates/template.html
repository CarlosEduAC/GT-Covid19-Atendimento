<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>COVID-19 | Norte Fluminense</title>

    <link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='font-awesome/css/font-awesome.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/plugins/steps/jquery.steps.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/plugins/iCheck/custom.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/animate.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/plugins/datapicker/datepicker3.css') }}" rel="stylesheet">
    {#    <link href="{{ url_for('static', filename='css/plugins/awesome-bootstrap-checkbox/awesome-bootstrap-checkbox.css') }}"#}
    {#          rel="stylesheet">#}
    <link href="{{ url_for('static', filename='css/plugins/bootstrap-tagsinput/bootstrap-tagsinput.css') }}"
          rel="stylesheet">
    <link href="{{ url_for('static', filename='css/app.css') + "?v=0.6" }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/plugins/chosen/bootstrap-chosen.css') }}" rel="stylesheet">

    <link href="{{ url_for('static', filename='ui/components/transition.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='ui/components/form.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='ui/components/input.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='ui/components/dropdown.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='ui/components/checkbox.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='ui/components/icon.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='ui/components/button.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='ui/components/popup.min.css') }}" rel="stylesheet">

    <style>
        .wizard > .content {
            background: unset;
            overflow: unset;
        }

        .ui.form .field:last-child {
            margin-bottom: 1em;
        }

        .ui.form .fields,
        .ui.form .fields:last-child {
            margin-bottom: 0;
        }

        label {
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
    </style>
</head>

<body class="pace-done mini-navbar">
<div id="wrapper">
    <nav class="navbar-default navbar-static-side" role="navigation">
        <div class="sidebar-collapse">
            <ul class="nav metismenu" id="side-menu">
                <li class="nav-header">
                    <div class="logo-element">
                        ST+
                    </div>
                </li>
                <li>
                    <a href="/" title="Atendimento"><i class="fa fa-th-large"></i> <span class="nav-label">Menu Atendente</span>
                        <span
                                class="fa arrow"></span></a>
                </li>
                <li>
                    <a href="/admin" title="Admin"><i class="fa fa-diamond"></i> <span
                            class="nav-label">Tela Admin</span></a>
                </li>
                <li>
                    <a href="/about" title="Sobre"><i class="fa fa-bar-chart-o"></i> <span
                            class="nav-label">Primeiro Atendimento</span><span
                            class="fa arrow"></span></a>
                </li>
                <li>
                    <a href="/logout" title="Logout">
                        <i class="fa fa-sign-out"></i>
                        <span class="nav-label">Logout</span>
                        <span class="fa arrow"></span>
                    </a>
                </li>
            </ul>
        </div>
    </nav>

    <div id="page-wrapper" class="gray-bg">
        <div class="row border-bottom">
            <nav class="navbar navbar-static-top  " role="navigation" style="margin-bottom: 0; padding: 10px;">
                <ul class="nav navbar-top-links navbar-right">
                    <li>
                        <span class="m-r-sm text-muted welcome-message">Prefeitura de {{dados.prefeitura}} - Sistema de Telemonitoramento COVID-19.</span>
                    </li>
                </ul>
                <div style="right: 0%;">
                    <a href="/admin">
                        <i class="fa fa-cog"></i> Admin
                    </a>&nbsp;&nbsp;
                    <a href="/logout">
                        <i class="fa fa-sign-out"></i> Log out
                    </a>
                </div>
            </nav>
        </div>

        {% block conteudo %} {% endblock %}

        <br>

        <div class="footer">
            <div class="float-right">
                <strong>Copyright</strong> Universidade Federal Fluminense &copy; 2020
            </div>
            <div>
                <strong>Copyright</strong> Universidade Federal do Rio de Janeiro &copy; 2020
            </div>
        </div>
    </div>
</div>

<!-- Mainly scripts -->
<script src="{{ url_for('static', filename='js/jquery-3.1.1.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/popper.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/plugins/metisMenu/jquery.metisMenu.js') }}"></script>
<script src="{{ url_for('static', filename='js/plugins/slimscroll/jquery.slimscroll.min.js') }}"></script>


<!-- Custom and plugin javascript -->
<script src="{{ url_for('static', filename='js/inspinia.js') }}"></script>
<script src="{{ url_for('static', filename='js/plugins/pace/pace.min.js') }}"></script>

<!-- iCheck -->
<script src="{{ url_for('static', filename='js/plugins/iCheck/icheck.min.js') }}"></script>

<!-- Data picker -->
<script src="{{ url_for('static', filename='js/plugins/datapicker/bootstrap-datepicker.js') }}"></script>

<!-- Steps -->
<script src="{{ url_for('static', filename='js/plugins/steps/jquery.steps.min.js') }}"></script>

<!-- Jquery Validate -->
<script src="{{ url_for('static', filename='js/plugins/validate/jquery.validate.min.js') }}"></script>

<!-- Input Mask-->
<script src="{{ url_for('static', filename='js/plugins/jasny/jasny-bootstrap.min.js') }}"></script>

<script src="{{ url_for('static', filename='js/template.js') }}"></script>

<!-- Tags Input -->
<script src="{{ url_for('static', filename='js/plugins/bootstrap-tagsinput/bootstrap-tagsinput.js') }}"></script>

<script src="{{ url_for('static', filename='js/plugins/chosen/chosen.jquery.js') }}"></script>


<script src="{{ url_for('static', filename='ui/components/transition.min.js') }}"></script>
<script src="{{ url_for('static', filename='ui/components/form.min.js') }}"></script>
<script src="{{ url_for('static', filename='ui/components/dropdown.min.js') }}"></script>
<script src="{{ url_for('static', filename='ui/components/checkbox.min.js') }}"></script>
<script src="{{ url_for('static', filename='ui/components/popup.min.js') }}"></script>

{#<script src="{{ url_for('static', filename='js/app.js') + "?v=0.6" }}"></script>#}

<script>
    $(document).ready(function () {
        // Remove a obrigatoriedade dos inputs ocultos
        $('.offscreen .is-required').removeClass('required')

        $('.i-checks').iCheck({
            checkboxClass: 'icheckbox_square-green',
            radioClass: 'iradio_square-green',
        });

        $('.tagsinput').tagsinput({
            tagClass: 'label label-primary'
        });

        $('.chosen-select').chosen({width: "100%"});

        document.querySelectorAll(".iCheck-helper").forEach(function (input) {
            input.addEventListener("click", function (event) {
                radio(event.target.parentElement.childNodes[0]);
            })
        })

        {#$("input[name=cpf]").inputmask("999.999.999-99");#}

        $('.input-group.date').datepicker({
            todayBtn: "linked",
            keyboardNavigation: false,
            forceParse: true,
            calendarWeeks: true,
            autoclose: true
        });


        $('.ui.dropdown.single').dropdown({
            allowAdditions: true,
            onChange: function (value, text, $selectedItem) {
                const data_parent = $selectedItem.attr('data-parent');

                const $parent = $selectedItem.closest('.field').parent()

                $parent.find(`.field[data-parent=${data_parent}]`).closest('.master-fields').addClass('offscreen')

                $parent.find(`.field[data-parent=${data_parent}]`).addClass('offscreen')

                $parent.find(`.field[data-parent=${data_parent}][data-parent-option=${value}]`).closest('.master-fields')
                    .removeClass('offscreen')

                $parent.find(`.field[data-parent=${data_parent}][data-parent-option=${value}]`)
                    .removeClass('offscreen')
            }
        });

        $('.ui.dropdown.multiple').dropdown({
            allowAdditions: true,
        });

        $('.ui.checkbox').checkbox();

        $('.btn-add').popup();
    });

    function radio(input) {
        const id = input.getAttribute("id")
        const name = input.getAttribute("name")
        const father = $(input).closest(".form-group")

        // div com o conteudo oculto para o radio selecionado
        const content = $("div[data-id='" + id + "']")
        content.removeClass("offscreen")

        // divs com o conteúdo oculto dos radios não selecionados
        const hiddens = father.find("div[data-name='" + name + "']:not(div[data-id='" + id + "'])")
        hiddens.addClass("offscreen")

        // Tornar os campos dessa div marcados como is-required obrigatórios
        content.find(".is-required").addClass("required")

        // Tornar todos os inputs ocultos como não obrigatórios
        hiddens.find(".is-required").removeClass("required")
    }

    function addInput(element) {
        const fields = $(element).parent().prev();

        const novo = fields.clone()
        novo.find('label').remove()
        novo.find('.disabled').removeClass('disabled')

        const data_parent = novo.find('.field').first().attr('data-parent')

        const len = $(`input[type=hidden][name=${data_parent}_len]`)

        len.val(+len.val() + +1)

        const data_index = fields.last().attr('data-index')

        let index;

        if (data_index === undefined) {
            index = 1
            fields.last().attr('data-index', index)
        } else {
            index = data_index
        }

        novo.attr('data-index', +index + +1)


        novo.find('input').each(function (i, input) {
            const name = $(input).attr('name')
            const new_name = name + '_' + (+index + +1)
            $(input).attr('id', new_name)
            $(input).attr('name', new_name)
        })

        novo.find('.dropdown').dropdown('clear')

        fields.after(novo)
    }

    function removeInput(element) {
        $(element).closest('.fields').remove()
    }
</script>

</body>
</html>
